{"version":3,"sources":["../../../../../../src/lib/utils/application-commands/compute-differences/options.ts"],"names":[],"mappings":";;;;AACA,SAAS,8BAAsD;AAC/D,SAAS,+BAA+B;AAEjC,UAAU,aAChB,iBACA,YAC+B;AAE/B,MAAI,CAAC,iBAAiB,UAAU,YAAY,QAAQ;AACnD,UAAM;AAAA,MACL,KAAK;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,IACX;AAAA,EACD,WAES,iBAAiB,UAAU,CAAC,YAAY,QAAQ;AACxD,UAAM;AAAA,MACL,KAAK;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,IACX;AAAA,EACD,WAES,YAAY,QAAQ;AAC5B,QAAI,QAAQ;AACZ,eAAW,UAAU,YAAY;AAChC,YAAM,eAAe;AACrB,YAAM,iBAAiB,gBAAiB,YAAY;AACpD,aAAO,wBAAwB,EAAE,cAAc,QAAQ,eAAe,CAAC;AAAA,IACxE;AAGA,QAAI,QAAQ,gBAAiB,QAAQ;AACpC,UAAI;AACJ,cAAQ,SAAS,gBAAiB,KAAK,OAAO,QAAW;AACxD,cAAM,eACL,uBAAuB,IAAI,OAAO,IAAI,KAAK,YAAY,OAAO,IAAI;AAEnE,cAAM;AAAA,UACL,KAAK,oCAAoC,KAAK;AAAA,UAC9C,UAAU;AAAA,UACV,UAAU,GAAG,YAAY,cAAc,OAAO,IAAI;AAAA,QACnD;AAEA;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AA9CiB","sourcesContent":["import type { APIApplicationCommandOption } from 'discord-api-types/v10';\nimport { optionTypeToPrettyName, type CommandDifference } from './_shared';\nimport { reportOptionDifferences } from './option';\n\nexport function* checkOptions(\n\texistingOptions?: APIApplicationCommandOption[],\n\tnewOptions?: APIApplicationCommandOption[]\n): Generator<CommandDifference> {\n\t// 0. No existing options and now we have options\n\tif (!existingOptions?.length && newOptions?.length) {\n\t\tyield {\n\t\t\tkey: 'options',\n\t\t\toriginal: 'no options present',\n\t\t\texpected: 'options present'\n\t\t};\n\t}\n\t// 1. Existing options and now we have no options\n\telse if (existingOptions?.length && !newOptions?.length) {\n\t\tyield {\n\t\t\tkey: 'options',\n\t\t\toriginal: 'options present',\n\t\t\texpected: 'no options present'\n\t\t};\n\t}\n\t// 2. Iterate over each option if we have any and see what's different\n\telse if (newOptions?.length) {\n\t\tlet index = 0;\n\t\tfor (const option of newOptions) {\n\t\t\tconst currentIndex = index++;\n\t\t\tconst existingOption = existingOptions![currentIndex];\n\t\t\tyield* reportOptionDifferences({ currentIndex, option, existingOption });\n\t\t}\n\n\t\t// If we went through less options than we previously had, report that\n\t\tif (index < existingOptions!.length) {\n\t\t\tlet option: APIApplicationCommandOption;\n\t\t\twhile ((option = existingOptions![index]) !== undefined) {\n\t\t\t\tconst expectedType =\n\t\t\t\t\toptionTypeToPrettyName.get(option.type) ?? `unknown (${option.type}); please contact Sapphire developers about this!`;\n\n\t\t\t\tyield {\n\t\t\t\t\tkey: `existing command option at index ${index}`,\n\t\t\t\t\texpected: 'no option present',\n\t\t\t\t\toriginal: `${expectedType} with name ${option.name}`\n\t\t\t\t};\n\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\t}\n}\n"]}